@import '../variables';
@import '../mixins';

// 输入框prefix&suffix 切换两种图标状态
@mixin prefix-suffix-active-toggle($isActive) {
  .icon {
    &.x-ant-input-icon-active {
      @if $isActive {
        display: inline-block;
      } @else {
        display: none;
      }
    }

    &.x-ant-input-icon-inactive {
      @if $isActive {
        display: none;
      } @else {
        display: inline-block;
      }
    }

    &.x-ant-input-icon-color-variant {
      @if $isActive {
        color: $color-primary-blue
      }
    }
  }
}

.smartui-input:not(.raw) {
  // input输入框(输入框没有伪元素，只能用border)
  .ant-input, &.ant-input {
    // 自动填充样式配置
    &:-webkit-autofill {
      background-color: transparent;
      background-image: none;
      -webkit-box-shadow: 0 0 0px 1000px transparent inset !important;
      transition: background-color 50000s ease-in-out 0s; //背景色透明  生效时长  过渡效果  启用时延迟的时间
    }

    // placeholder
    &::placeholder {
      color: $color-text-comment;
    }
  }

  &.ant-input {
    @include input-underline($color-line-bold);
    // hover
    &:not(.ant-input[disabled]):hover {
      @include input-underline($color-text-comment);
    }

    // focus
    &:not(.ant-input[disabled]):focus {
      @include input-underline($color-primary-blue);
    }

    &.ant-input[disabled] {
      background: transparent;
      border-bottom-color: rgba($color-line-bold, .5);
    }
  }


  .ant-input-affix-wrapper, &.ant-input-affix-wrapper {
    &:not(.ant-input-search) {
      @include input-underline($color-line-bold);
      padding: 0;
      overflow: hidden;
      // prefix
      .ant-input-prefix {
        margin-right: 5px;
        margin-left: 9px;
        @include prefix-suffix-active-toggle(false);
      }

      // 输入框本体
      .ant-input {
        border: none;
        box-shadow: none !important;
      }

      // suffix
      .ant-input-suffix {
        margin-right: 9px;
        margin-left: 5px;
        @include prefix-suffix-active-toggle(false);
      }

      // 输入框hover
      &:not(.ant-input-affix-wrapper-disabled):hover {
        @include input-underline($color-text-comment);
      }
    }

    &.ant-input-affix-wrapper-disabled {
      background-color: transparent;
      border-bottom-color: rgba($color-line-bold, .5);

      .ant-input-prefix,
      .ant-input-suffix, {
        opacity: .3;
      }
    }
  }

  &.ant-input-affix-wrapper-focused,
  &.ant-input-affix-wrapper-focused-focused:hover,
  &.ant-input-affix-wrapper-focused:focus {
    &:not(.ant-input-search):not(.ant-input-affix-wrapper-disabled) {
      // 下划线
      @include input-underline($color-primary-blue);
      // prefix
      .ant-input-prefix {
        @include prefix-suffix-active-toggle(true);
      }

      // suffix
      .ant-input-suffix {
        @include prefix-suffix-active-toggle(true);
      }
    }
  }

  .ant-input-search {
    height: 30px !important;

    .ant-input {
      height: 100% !important;
    }
  }
}
